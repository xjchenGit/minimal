<style>
    /* 桌面版預設樣式 */
    #sidebar-content { text-align: left; padding: 0 20px; }
    #sidebar-content nav a { text-decoration: none; color: #888; font-weight: 500; display: block; font-size: 17px; line-height: 2.4; font-family: 'Source Serif 4', serif; }
    
    /* 桌面版隱藏 Follow 按鈕，顯示普通圖示 */
    .follow-container { display: none; }
    .social-icons { display: flex; gap: 12px; margin-top: 10px; }

    /* --- 手機版 RWD：仿 Wei-Ning Hsu 風格 --- */
    @media (max-width: 768px) {
        #sidebar-content {
            display: flex !important;
            flex-direction: column !important; 
            padding: 15px !important;
            gap: 10px !important;
        }

        /* 導航置頂並靠右 */
        #nav-menu {
            order: -1; /* 強制排到最前面 */
            display: flex !important;
            justify-content: flex-end !important;
            gap: 20px !important;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 8px;
            margin: 0 0 5px 0 !important;
        }

        #nav-menu a {
            display: inline-block !important;
            font-size: 15px !important;
            line-height: 1 !important;
        }

        /* 個人資訊橫排容器 */
        .profile-main {
            display: flex !important;
            align-items: center !important;
            width: 100%;
        }

        #main-avatar {
            width: 45px !important;
            height: 45px !important;
            margin: 0 12px 0 0 !important;
            border-radius: 50%;
        }

        .profile-text {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        #user-name {
            font-size: 18px !important;
            margin: 0 !important;
            font-weight: 700;
        }

        #user-info {
            font-size: 12px !important;
            color: #666;
            line-height: 1.3;
            margin: 2px 0 0 0 !important;
        }

        /* 手機版隱藏原始圖示，顯示 Follow 按鈕 */
        .social-icons { display: none !important; }
        .follow-container { 
            display: block !important; 
            margin-left: auto; 
            position: relative; 
        }

        #follow-btn {
            padding: 4px 12px;
            border: 1px solid #ddd;
            background: #fff;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
        }

        /* 下拉選單樣式 */
        .social-dropdown {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            background: white;
            border: 1px solid #eee;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 1000;
            width: 140px;
            border-radius: 4px;
            margin-top: 5px;
        }

        .social-dropdown a {
            display: flex !important;
            align-items: center;
            padding: 10px 12px;
            font-size: 13px !important;
            color: #444 !important;
            text-decoration: none !important;
            border-bottom: 1px solid #fafafa;
            line-height: 1 !important;
            font-weight: 400 !important;
        }
        
        .social-dropdown a i { margin-right: 8px; width: 16px; text-align: center; }
        .social-dropdown.show { display: block !important; }
    }
</style>

<div id="sidebar-content">
    <nav id="nav-menu">
        <a id="nav-about" href="index.html">About</a>
        <a id="nav-pub" href="publications.html">Publications</a>
    </nav>

    <div class="profile-main">
        <a href="index.html">
            <img src="img/xj.png" id="main-avatar" alt="Avatar">
        </a>
        
        <div class="profile-text">
            <h2 id="user-name">Xuanjun Chen</h2>
            <div id="user-info">
                Ph.D. Student @ NTU<br>
                Taipei, Taiwan
            </div>
        </div>

        <div class="follow-container">
            <button id="follow-btn">Follow</button>
            <div id="social-list" class="social-dropdown">
                <a href="mailto:D12942018@ntu.edu.tw"><i class="fas fa-envelope"></i> Email</a>
                <a href="https://www.linkedin.com/in/jun-ntu/" target="_blank"><i class="fab fa-linkedin"></i> LinkedIn</a>
                <a href="https://github.com/xjchenGit" target="_blank"><i class="fab fa-github"></i> GitHub</a>
                <a href="https://scholar.google.com/citations?user=ZDVOXd4AAAAJ&hl=en" target="_blank"><i class="fas fa-graduation-cap"></i> Scholar</a>
            </div>
        </div>
    </div>

    <div class="social-icons">
        <a href="mailto:D12942018@ntu.edu.tw"><i class="fas fa-envelope"></i></a>
        <a href="https://www.linkedin.com/in/jun-ntu/" target="_blank"><i class="fab fa-linkedin"></i></a>
        <a href="https://github.com/xjchenGit" target="_blank"><i class="fab fa-github"></i></a>
        <a href="https://scholar.google.com/citations?user=ZDVOXd4AAAAJ&hl=en" target="_blank"><i class="fas fa-graduation-cap"></i></a>
    </div>
</div>

<script>
    // 導航高亮邏輯
    (function() {
        const currentPage = window.location.pathname.split("/").pop() || "index.html";
        const targetId = (currentPage === "publications.html") ? "nav-pub" : "nav-about";
        const activeLink = document.getElementById(targetId);
        if (activeLink) {
            activeLink.style.textDecoration = "underline";
            activeLink.style.textUnderlineOffset = "6px";
            activeLink.style.color = "#000";
            activeLink.style.fontWeight = "600";
        }
    })();

    // 下拉選單邏輯
    function toggleSocial() {
        event.stopPropagation(); // 防止冒泡
        const list = document.getElementById('social-list');
        list.classList.toggle('show');
    }

    // 點擊空白處關閉
    window.addEventListener('click', function(event) {
        const list = document.getElementById('social-list');
        if (list && !event.target.matches('#follow-btn')) {
            list.classList.remove('show');
        }
    });
</script>
